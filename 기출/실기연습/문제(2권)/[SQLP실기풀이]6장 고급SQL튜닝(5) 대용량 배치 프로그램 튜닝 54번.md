# \[SQLPì‹¤ê¸°í’€ì´]6ìž¥ ê³ ê¸‰SQLíŠœë‹(5) ëŒ€ìš©ëŸ‰ ë°°ì¹˜ í”„ë¡œê·¸ëž¨ íŠœë‹ 54ë²ˆ

ë¬¸ì œ ë§í¬ : https://velog.io/@yooha9621/SQLPì‹¤ê¸°ë¬¸ì œ-ëŒ€ìš©ëŸ‰ë°°ì¹˜í”„ë¡œê·¸ëž¨íŠœë‹54ë²ˆ

### 1) ê¸°ì¡´ ì¿¼ë¦¬ ë¶„ì„

ê¸°ì¡´ ì¿¼ë¦¬ì˜ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

1. ìƒí’ˆê¸°ë³¸ì´ë ¥ìž„ì‹œ í…Œì´ë¸” ë³‘ë ¬ FULL SCAN í›„ TQ10000 í…Œì´ë¸”íë¥¼ í†µí•´ ë¸Œë¡œë“œìºìŠ¤íŒ…
2. ìƒí’ˆê¸°ë³¸ í…Œì´ë¸” ë³‘ë ¬ FULL SCAN í›„ ë¸Œë¡œë“œìºìŠ¤íŒ…ìœ¼ë¡œ ë°›ì€ ìƒí’ˆê¸°ë³¸ì´ë ¥ìž„ì‹œ í…Œì´ë¸”ê³¼ í•´ì‹œ ì¡°ì¸
3. ì½”ë“œ ìƒì„¸ í…Œì´ë¸” ë³‘ë ¬ FULL SCAN í›„ TQ10001 í…Œì´ë¸”íë¥¼ í†µí•´ ë¸Œë¡œë“œìºìŠ¤íŒ…
4. (2)ë²ˆì—ì„œ ë§Œë“¤ì–´ì§„ ì¡°ì¸ ê²°ê³¼ ë°ì´í„°ë¥¼ TQ10002 í…Œì´ë¸”íë¥¼ í†µí•´ ë¸Œë¡œë“œìºìŠ¤íŒ…
5. ë¸Œë¡œë“œìºìŠ¤íŒ…ìœ¼ë¡œ ë°›ì€ (3)ë²ˆ ë°ì´í„°ì™€ (4)ë²ˆ ë°ì´í„° í•´ì‹œì¡°ì¸
6. (5)ë²ˆ ë°ì´í„°ë¥¼ TQ10003 í…Œì´ë¸”íë¥¼ í†µí•´ QCë¡œ ì „ì†¡

### 2) ë‚´ê°€ ìƒê°í•œ íŠœë‹ í¬ì¸íŠ¸ðŸ¤”

**í…Œì´ë¸”íë¥¼ í†µí•´ ëª¨ë“  ë°ì´í„°ê°€ ë¸Œë¡œë“œìºìŠ¤íŒ… ë°©ì‹ìœ¼ë¡œ ìž¬ë¶„ë°° ë˜ëŠ”ë° ì´ëŠ” êµ‰ìž¥ížˆ ë¶€í•˜ê°€ í´ ê²ƒìœ¼ë¡œ ì˜ˆìƒëœë‹¤.(ê·¸ëŸ¬ë‹ˆê¹ ì €ëŸ° ì˜¤ë¥˜ê°€ ë‚¬ê²„ì§€;; ðŸ˜± )**

1. ìƒí’ˆê¸°ë³¸ì´ë ¥ìž„ì‹œ í…Œì´ë¸” OUTER í…Œì´ë¸”ë¡œ ì„¤ì • ë° ë³‘ë ¬ FULL SCAN

* ðŸ‘‰ **FULL(A)**

1. ìƒí’ˆê¸°ë³¸ í…Œì´ë¸”ì„ INNER í…Œì´ë¸”ë¡œ ì„¤ì • ë° ë³‘ë ¬ FULL SCAN í›„ ìƒí’ˆ ê¸°ë³¸ì˜ ê°€ì§“ìˆ˜ê°€ ì–´ë–»ê²Œ ë ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë¸Œë¡œë“œìºìŠ¤íŒ…ë§ê³  íŒŒí‹°ì…”ë‹ ì¡°ì¸ì„ í•œë‹¤. ì´ ë•Œ ,INNER í…Œì´ë¸”ì¸ ìƒí’ˆê¸°ë³¸ í…Œì´ë¸”ì„ íŒŒí‹°ì…”ë‹ í•œë‹¤.(ì‹¤í–‰ê³„íšì—ì„œ ë°ì´í„°ê°€ í›¨ì”¬ ë§Žìœ¼ë¯€ë¡œ)
   * ðŸ‘‰ **FULL(B) pq\_distribute(b,NONE,PARTITION)**
2. ìƒí’ˆê¸°ë³¸ í…Œì´ë¸”ê³¼ ìƒí’ˆê¸°ë³¸ì´ë ¥ìž„ì‹œ í…Œì´ë¸”ì„ í•´ì‹œì¡°ì¸í•œë‹¤.
3. (3)ë²ˆì—ì„œ ë§Œë“¤ì–´ì§„ ì¡°ì¸ ê²°ê³¼ ë°ì´í„°ë¥¼ OUTER í…Œì´ë¸”ë¡œ ì„¤ì •
4. ì½”ë“œìƒì„¸ í…Œì´ë¸”ì„ INNER í…Œì´ë¸”ë¡œ ì„¤ì • ë° ë³‘ë ¬ FULL SCAN í›„ ë¸Œë¡œë“œìºìŠ¤íŒ…í•œë‹¤.
   * ðŸ‘‰ **FULL(C) pq\_distribute(C,NONE,BRADCAST)**
5. (3)ë²ˆ ë°ì´í„°ì™€ (5)ë²ˆ ë°ì´í„°ë¥¼ í•´ì‹œì¡°ì¸í•œë‹¤.
   * ðŸ‘‰ ì½”ë“œ ìƒì„¸ í…Œì´ë¸”ì€ ë°ì´í„°ê°€ ì ì€ ê²Œ ëª…í™•í•˜ë¯€ë¡œ swap\_join\_inputsìœ¼ë¡œ hash bulid inputì„ ëª…ì‹œí•´ì¤€ë‹¤. **SWAP\_JOIN\_INPUTS(C)**
6. ìƒí’ˆìƒì„¸ í…Œì´ë¸”ì„ INNER í…Œì´ë¸”ë¡œ ì„¤ì • ë° ë³‘ë ¬ FULL SCAN í›„ (6)ë²ˆ ë°ì´í„°ì™€ ì¡°ì¸í•˜ê¸° ìœ„í•´ í•´ì‹œ íŒŒí‹°ì…”ë‹ì„ ì§„í–‰í•œë‹¤. ì´ ë•Œ (6)ë²ˆ ë°ì´í„°ì˜ ì–‘ì´ í˜„ì €ížˆ ì ìœ¼ë¯€ë¡œ build inputì„ ëª…ì‹œí•œë‹¤.
   * ðŸ‘‰ **FULL(D) pq\_distribute(D,HASH,HASH) NO\_SWAP\_JOIN\_INPUTS(D)**
7. ë³‘ë ¬ë„ë¥¼ 16ìœ¼ë¡œ ë°”ê¾¼ë‹¤.
   * ðŸ‘‰ **PARALLEL(A , 16) PARALLEL(B,16) PARALLEL(C,16) PARALLEL(D,16)**

### 2) ë³€ê²½í•œ ì¿¼ë¦¬

**ë³€ê²½ ì „ ì¿¼ë¦¬**

```sql
SQL> INSERT /*+ APPEND */ INTO ìƒí’ˆê¸°ë³¸ì´ë ¥(...)
2> SELECT /*+ PARALLEL(A , 32) PARALLEL(B,32) PARALLEL(C,32) PARALLEL(D,32)
PQ_DISTRIBUTE(B,NONE,BROADCAST)
*/ ....
3> FROM ìƒí’ˆê¸°ë³¸ì´ë ¥ìž„ì‹œ a, ìƒí’ˆê¸°ë³¸ b, ì½”ë“œìƒì„¸ c, ìƒí’ˆìƒì„¸ d
4> WHERE a. ìƒí’ˆë²ˆí˜¸= b. ìƒí’ˆë²ˆí˜¸
5> AND
6) /
```

**ë³€ê²½ í›„ ì¿¼ë¦¬**

```sql
SQL> INSERT /*+ APPEND */ INTO ìƒí’ˆê¸°ë³¸ì´ë ¥(...)
2> SELECT /*+ PARALLEL(A , 16) PARALLEL(B,16) PARALLEL(C,16) PARALLEL(D,16)
FULL(A) FULL(B) FULL(C) FULL(D)
pq_distribute(b,NONE,PARTITION) pq_distribute(D,HASH,HASH)
SWAP_JOIN_INPUT(C) NO_SWAP_JOIN_INPUTS(D)
*/ ....
3> FROM ìƒí’ˆê¸°ë³¸ì´ë ¥ìž„ì‹œ a, ìƒí’ˆê¸°ë³¸ b, ì½”ë“œìƒì„¸ c, ìƒí’ˆìƒì„¸ d
4> WHERE a. ìƒí’ˆë²ˆí˜¸= b. ìƒí’ˆë²ˆí˜¸
5> AND
6) /
```
